## 2. 基本設計

要件定義をもとに、システムの全体像と技術的な構成を設計します。

### 2.1. システム構成図
*   **予約ページ (`/booking`)**
    *   予約フォームの入力項目に、「**送迎希望**」のチェックボックスまたはラジオボタンを追加します。（例：「□ 送迎を希望する」）
    *   Chakra UIの `Checkbox` コンポーネントを使うと簡単に実装できます。


### 2.2. ページ構成（画面一覧）

#### **【顧客向けサイト】**
| ページ名 | URL | 描画方法 | 概要 |
| :--- | :--- | :--- | :--- |
| トップページ | `/` | SSG / ISR | お知らせや店舗の紹介 |
| メニュー一覧 | `/menu` | SSG / ISR | サービスメニューの一覧 |
| 店舗情報 | `/access` | SSG | 地図や連絡先 |
| 予約ページ | `/booking` | CSR / SSR | 予約フローの開始ページ |
| ログイン | `/login` | CSR | 会員ログインページ |
| マイページ | `/mypage` | CSR | 予約履歴の確認など（要ログイン） |

> **SSG/ISR/CSR/SSRについて**
> - **SSG (Static Site Generation):** ビルド時にHTMLを生成。更新頻度の低いページ（店舗情報など）に最適。
> - **ISR (Incremental Static Regeneration):** SSGをベースに、一定時間ごとにページを再生成。お知らせ一覧など、時々更新されるページ向き。
> - **CSR (Client Side Rendering):** ユーザーのブラウザ側でページを生成。マイページなど、ユーザーごとに内容が大きく変わるページ向き。
> - **SSR (Server Side Rendering):** リクエストごとにサーバー側でHTMLを生成。常に最新情報が必要なページ向き。

#### **【管理者向けサイト】**
管理画面はURLを `/admin` 以下に集約します。全てログインが必須です。

| ページ名 | URL | 描画方法 | 概要 |
| :--- | :--- | :--- | :--- |
| 管理者ログイン | `/admin/login` | CSR | 管理画面へのログイン |
| ダッシュボード | `/admin` | CSR | 直近の予約状況を表示 |
| 予約管理 | `/admin/bookings` | CSR | 予約の一覧、検索、新規登録 |
| 店舗設定 | `/admin/settings/shop` | CSR | 営業時間や定休日の設定 |
| メニュー設定 | `/admin/settings/menu` | CSR | 提供メニューの管理 |


*   **ダッシュボード (`/admin`)**
    *   「本日の送迎予定」のようなセクションを設け、送迎が必要な予約（患者名、時間など）をリストアップします。
*   **予約管理ページ (`/admin/bookings`)**
    *   予約一覧テーブルに「**送迎**」という列を追加します。
    *   送迎希望がある予約には、車のアイコンなどを表示して視覚的に分かりやすくすると良いでしょう。


### 2.3. 使用技術の役割

| 技術 | 役割 |
| :--- | :--- |
| **Next.js (React)** | フロントエンドのフレームワーク。SSG/ISRによる高速化とSEO対策、ファイルベースルーティングによる開発効率向上を担う。 |
| **TypeScript** | 静的型付けを導入し、コードの品質と保守性を高める。 |
| **Chakra UI** | UIコンポーネントライブラリ。レスポンシブ対応のデザインを迅速に構築する。 |
| **Firebase** | バックエンド全般を担当するBaaS (Backend as a Service)。<br>・**Firestore:** データベースとして予約情報や各種設定を保存。<br>・**Authentication:** 顧客と管理者の認証機能を提供。<br>・**Cloud Functions:** (オプション) 予約完了時のメール送信などのサーバー側処理を実行。 |
| **Vercel** | Next.jsで作成したアプリケーションのホスティング（公開）と、Git連携による自動デプロイ（CI/CD）環境を提供。 |

---