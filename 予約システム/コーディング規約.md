# コーディング規約

このドキュメントは、本プロジェクトにおけるコーディングの規約を定めたものです。コードの可読性、保守性、一貫性を高めることを目的とします。

## 1. 基本方針

-   **言語**: TypeScript
-   **フレームワーク**: Next.js (App Router)
-   **UIライブラリ**: Chakra UI
-   **フォーマット/Linter**: Prettier / ESLint を使用し、コードスタイルを自動で統一します。

## 2. 命名規則

| 対象 | 形式 | 例 |
| :--- | :--- | :--- |
| **ファイル（コンポーネント）** | `PascalCase.tsx` | `BookingCalendar.tsx` |
| **ファイル（その他）** | `kebab-case.ts` | `date-utils.ts` |
| **ディレクトリ** | `kebab-case` | `components/ui` |
| **Reactコンポーネント** | `PascalCase` | `function BookingCalendar() {}` |
| **変数・定数** | `camelCase` | `const bookingDate = ...` |
| **関数** | `camelCase` | `function getAvailableSlots() {}` |
| **型・インターフェース** | `PascalCase` | `type UserProfile = { ... }` |

※ Next.jsの予約語（`page.tsx`, `layout.tsx`, `loading.tsx` など）は小文字のまま使用します。

## 3. ディレクトリ構成

プロジェクトの主要なディレクトリ構成は以下の通りです。

/
├── app/ # Next.js App Router。各ディレクトリがURLパスに対応します。
│ ├── (public)/ # 顧客向けサイトのルートグループ
│ ├── (admin)/ # 管理者向けサイトのルートグループ
│ └── api/ # API Routes (Route Handlers)
├── components/ # 再利用可能なReactコンポーネント
│ ├── ui/ # 汎用的なUI部品 (Button, Input, Cardなど)
│ └── features/ # 特定の機能に紐づく複合部品 (BookingCalendar, MenuCardなど)
├── lib/ # ライブラリ、ヘルパー関数、外部サービス連携
│ └── firebase.ts # Firebaseの初期化設定
└── types/ # TypeScriptの共通型定義
└── index.ts # プロジェクト全体で利用する型定義

## 4. コンポーネント設計

-   **単一責任の原則**: 1つのコンポーネントは、1つの役割に集中させます。
-   **UIとロジックの分離**: 可能な限り、見た目を担当するコンポーネントと、データの取得や状態管理を行うロジックを分離します。React Server Components (RSC) と Client Components を適切に使い分けます。
-   **Chakra UIの積極活用**: ボタンやフォームなどの基本的なUI部品は、Chakra UIのコンポーネントを積極的に利用・拡張して作成します。

## 5. コメント

-   **「なぜ」を書く**: コードを見れば「何をしているか」は分かります。「なぜこのコードが必要なのか」「なぜこの方法を選んだのか」という背景や意図をコメントに残します。
-   **複雑なロジック**: 複雑なアルゴリズムや計算処理には、処理の概要を説明するコメントを付けます。
-   **TODOコメント**: 後で修正が必要な箇所には `// TODO: [内容]` という形式でコメントを残し、可能であればIssue番号も記載します。

## 6. Git運用ルール

-   **ブランチ戦略**: GitHub Flowを基本とします。
    -   `main`: 本番環境にデプロイされる安定版ブランチ。直接プッシュは禁止。
    -   `develop`: 開発のベースとなるブランチ。
    -   `feature/issue番号-機能名`: 各機能の開発はこのブランチを切って行います。（例: `feature/14-implement-booking-calendar`）
-   **コミットメッセージ**: Conventional Commits の規約に従います。
    -   `feat:`: 新機能の追加
    -   `fix:`: バグ修正
    -   `docs:`: ドキュメントの変更
    -   `style:`: コードスタイルの変更（フォーマットなど）
    -   `refactor:`: リファクタリング
    -   `test:`: テストの追加・修正
    -   `chore:`: ビルドプロセスや補助ツールの変更

    例: `feat: Add needsPickup checkbox to booking form`